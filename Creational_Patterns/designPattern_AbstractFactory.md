# 一、Abstract Factory（抽象工厂）

## 1、意图

​        提供一个创建一系列相关或相互依赖对象的接口，而无需指定他们具体的类

## 2、适用性

1. 一个系统要独立于它的产品的创建、组合、表示时

2. 一个系统要由多个产品系列中的一个来配置

3. 当要强调一系列相关的产品对象的设计以便进行联合使用时

4. 当你提供一个产品类库，而只想显示接口而不是实现时

   即若有多个产品系列，而每次仅会存在一个产品时，或者需要保证同一个系列产品对象的组合使用时，该设计模式是一个选择。

## 3、结构图

![](Z:\temp\abstractfactory_structure.PNG)

## 4、效果（优缺点）

1. 分离了具体的类：将客户与类的实现分离
2. 易于交换产品系列：容易切换到另一个具体的工厂
3. 有利于产品的一致性：一个应用一次只能使用同一个系列的对象时
4. 难以支持新种类产品：支持新种类产品，会导致该工厂接口扩展，就不得不改变工厂类以及其所有的子类（**可通过传递参数来解决**）

## 5、个人总结

​        抽象工厂的设计模式主要在于：多个产品中仅存一个（如兼容windows和linux），或者保证多个操作对象均来自同一个产品系列（如创建A和B，均需要保证来自同一个基类），该场景下适用；

​        并且对客户仅可见操作接口，具体类的实现延迟到了子类中；但这也带来一个问题，即当新增或修改用户操作或接口时，需要修改基类以及其所有的子类（当然可以通过传递创建参数来解决这个问题）。

​        举例：创建迷宫时，原本仅有创建房间，当需要新增创建带炸弹的房间时，需要对所有子类进行接口扩展；而好一点的解决方案是讲创建迷宫的操作带一个入参（入参为一个基类，炸弹房间是普通房间的子类即可），由入参确定当前创建的是哪种房间。

